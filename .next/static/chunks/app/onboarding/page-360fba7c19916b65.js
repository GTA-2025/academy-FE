(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{40387:(e,t,r)=>{Promise.resolve().then(r.bind(r,40697))},67401:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(12115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...p}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:i?24*Number(l)/Number(s):l,className:n("lucide",d),...p},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:i,...d}=r;return(0,a.createElement)(l,{ref:o,iconNode:t,className:n("lucide-".concat(s(e)),i),...d})});return r.displayName="".concat(e),r}},46967:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(67401).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},76046:(e,t,r)=>{"use strict";var a=r(66658);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},40697:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var a=r(95155),s=r(12115),n=r(67401);let o=(0,n.A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),l=(0,n.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),i=(0,n.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var d=r(46967),c=r(31027),u=r(21567);let p=(0,c.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),h=s.forwardRef((e,t)=>{let{className:r,variant:s,...n}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,u.cn)(p({variant:s}),r),...n})});h.displayName="Alert",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h5",{ref:t,className:(0,u.cn)("mb-1 font-medium leading-none tracking-tight",r),...s})}).displayName="AlertTitle";let v=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,u.cn)("text-sm [&_p]:leading-relaxed",r),...s})});v.displayName="AlertDescription";var m=r(42649),g=r(30227),f=r(2215);let b=()=>(0,a.jsx)("div",{className:"min-h-screen bg-white dark:bg-[#0A0A0A] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md border rounded-md shadow-lg bg-white dark:bg-[#0A0A0A] rounded-xl shadow-lg p-6 space-y-6",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full",children:(0,a.jsx)("div",{className:"bg-gray-300 h-2 rounded-full"})}),(0,a.jsxs)("form",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"skeleton w-32 h-6 bg-gray-300 rounded"}),(0,a.jsx)("div",{className:"skeleton w-full h-12 bg-gray-300 rounded"})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-4",children:[(0,a.jsx)("div",{className:"skeleton w-24 h-10 bg-gray-300 rounded"}),(0,a.jsx)("div",{className:"skeleton w-24 h-10 bg-gray-300 rounded"})]})]})]})});var x=r(76046),y=r(5565),j=r(89208);let w=()=>{var e;let{isLoading:t,loadingUI:r,user:n}=(0,f.M)({LoadingComponent:b,requireAuth:!1}),c=(0,x.useRouter)();(0,s.useEffect)(()=>{if(null==n?void 0:n.starter.completed)return c.replace("/home/education")},[c,n]);let[u,p]=(0,s.useState)(1),[w,k]=(0,s.useState)({username:"",phoneNumber:"",country:"",profilePicture:null,skippedSteps:new Set}),[N,A]=(0,s.useState)({}),[C,S]=(0,s.useState)(!1),U=e=>{if(w.skippedSteps.has(e))return!0;let t={};switch(e){case 1:w.username?w.username.length<3&&(t.username="Username must be at least 3 characters"):t.username="Username is required";break;case 2:w.phoneNumber?/^\+?[\d\s-]{10,}$/.test(w.phoneNumber)||(t.phoneNumber="Please enter a valid phone number"):t.phoneNumber="Phone number is required";break;case 3:w.country||(t.country="Country is required")}return A(t),0===Object.keys(t).length},R=async()=>{U(u)&&(await O(u),p(e=>e<4?e+1:e))},E=async()=>{let e;k(e=>({...e,skippedSteps:new Set([...e.skippedSteps,u])}));let t=j.A.get("token"),r={headers:{Authorization:"Bearer ".concat(t)}};try{switch(u){case 1:e=await m.A.post("/api/onboard/skip-onboard-one",r);break;case 2:e=await m.A.post("/api/onboard/skip-onboard-two",r);break;case 3:e=await m.A.post("/api/onboard/skip-onboard-three",r);break;case 4:console.log("this the token:",t),e=await m.A.post("/api/onboard/skip-all",r),console.log(e);break;default:throw Error("Invalid step")}console.log("Step ".concat(u," data submitted:"),null==e?void 0:e.data)}catch(e){var a;console.log("Error submitting step ".concat(u,":"),(null===(a=e.response)||void 0===a?void 0:a.data)||e.message)}p(e=>e<4?e+1:e)},O=async e=>{var t,r,a,s,n;S(!0);try{let n;let o=j.A.get("token"),l={headers:{Authorization:"Bearer ".concat(o)}};switch(e){case 1:n=await m.A.post("/api/onboard/username",{username:w.username},l),g.X.toastS(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.message);break;case 2:n=await m.A.post("/api/onboard/phone",{phoneNumber:w.phoneNumber},l),g.X.toastS(null==n?void 0:null===(r=n.data)||void 0===r?void 0:r.message);break;case 3:n=await m.A.post("/api/onboard/country",{country:w.country},l),g.X.toastS(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.message);break;case 4:if(w.profilePicture){let e=new FormData;e.append("profilePicture",(null==w?void 0:w.profilePicture)||{}),n=await m.A.post("/api/onboard/profile-picture",e,{headers:{Authorization:"Bearer ".concat(o),"Content-Type":"multipart/form-data"}}),g.X.toastS(null==n?void 0:null===(s=n.data)||void 0===s?void 0:s.message),(null==n?void 0:n.data)&&c.push("/home/education")}break;default:throw Error("Invalid step")}console.log("Step ".concat(e," data submitted:"),null==n?void 0:n.data)}catch(t){console.log("Error submitting step ".concat(e,":"),(null===(n=t.response)||void 0===n?void 0:n.data)||t.message)}finally{S(!1)}},P=e=>{let{name:t,value:r}=e.target;k(e=>({...e,[t]:r}))},B=e=>{var t;let r=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;k(e=>({...e,profilePicture:r}))};return t?r:(null==n?void 0:null===(e=n.starter)||void 0===e?void 0:e.completed)?void 0:(0,a.jsx)("div",{className:"min-h-screen  bg-white dark:bg-[#0A0A0A] flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md border rounded-md shawdow-lg bg-white dark:bg-[#0A0A0A] rounded-xl shadow-lg p-6 space-y-6",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-2 rounded-full",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(u/4*100,"%")}})}),(0,a.jsxs)("form",{className:"space-y-6",children:[(()=>{var e,t,r,s;let i="w-full p-2 border bg-white dark:bg-[#0A0A0A] rounded-lg outline-none focus:ring-1 focus:ring-blue-500";switch(u){case 1:if(!(null==n?void 0:null===(e=n.starter)||void 0===e?void 0:e.onboard1))return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Choose your username"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"text",name:"username",value:w.username,onChange:P,placeholder:"Enter username",className:i}),(0,a.jsx)("div",{className:" border-l  -ml-10 px-1 ",children:".gta"})]}),N.username&&(0,a.jsx)(h,{variant:"destructive",className:"mt-2",children:(0,a.jsx)(v,{children:N.username})})]})]});case 2:if(!(null==n?void 0:null===(t=n.starter)||void 0===t?void 0:t.onboard2))return(0,a.jsxs)("div",{className:"space-y-4  ",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Add your phone number"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("input",{type:"tel",name:"phoneNumber",value:w.phoneNumber,onChange:P,placeholder:"Enter phone number",className:i}),N.phoneNumber&&(0,a.jsx)(h,{variant:"destructive",className:"mt-2",children:(0,a.jsx)(v,{children:N.phoneNumber})})]})]});case 3:if(!(null==n?void 0:null===(r=n.starter)||void 0===r?void 0:r.onboard3))return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Select your country"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("select",{name:"country",value:w.country,onChange:P,className:i,children:[(0,a.jsx)("option",{value:"US",children:"United States"}),(0,a.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,a.jsx)("option",{value:"CA",children:"Canada"}),(0,a.jsx)("option",{value:"AU",children:"Australia"})]}),N.country&&(0,a.jsx)(h,{variant:"destructive",className:"mt-2",children:(0,a.jsx)(v,{children:N.country})})]})]});case 4:if(!(null==n?void 0:null===(s=n.starter)||void 0===s?void 0:s.completed))return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Add a profile picture"}),(0,a.jsxs)("div",{className:"flex  flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"!w-[50px] !h-[50px] rounded-full flex items-center justify-center",children:w.profilePicture?(0,a.jsx)(y.default,{width:50,height:50,objectFit:"cover",src:URL.createObjectURL(w.profilePicture),alt:"Profile preview",className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)(o,{size:40,className:"text-gray-400"})}),(0,a.jsxs)("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:[(0,a.jsx)(l,{className:"mr-2",size:20}),"Choose Photo",(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:B})]})]})]});default:return null}})(),(0,a.jsxs)("div",{className:"flex justify-between pt-4",children:[u>1&&(0,a.jsxs)("button",{type:"button",onClick:()=>{p(e=>e>1?e-1:e)},className:"inline-flex items-center px-4 py-2 text-gray-600 hover:text-gray-800",children:[(0,a.jsx)(i,{size:20,className:"mr-1"}),"Back"]}),(0,a.jsxs)("div",{className:"ml-auto flex gap-2",children:[u<=4&&(0,a.jsx)("button",{type:"button",onClick:E,className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"Skip"}),(0,a.jsxs)("button",{type:"button",onClick:R,className:"inline-flex items-center px-4 py-2 ".concat(C?"bg-gray-400":u<4?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"," text-white rounded-lg"),disabled:C,children:[u<4?"Next":"Complete",(0,a.jsx)(d.A,{size:20,className:"ml-1"})]})]})]})]})]})})}},30227:(e,t,r)=>{"use strict";r.d(t,{X:()=>s});var a=r(14046);let s={toastE:e=>{a.oR.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastS:e=>{a.oR.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastW:e=>{a.oR.warning(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastI:e=>{a.oR.info(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})}}},2215:(e,t,r)=>{"use strict";r.d(t,{M:()=>l});var a=r(95155),s=r(12115),n=r(76046),o=r(54559);let l=function(){let{LoadingComponent:e,redirectPath:t,LoadingComponentProps:r={},requireAuth:l=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(0,n.useRouter)(),{checkAuth:d,isCheckingAuth:c,authUser:u}=(0,o.d)();return((0,s.useEffect)(()=>{d()},[d]),(0,s.useEffect)(()=>{!c&&!u&&t&&l&&i.push(t)},[u,c,i,t,l]),c&&e)?{isLoading:!0,loadingUI:(0,a.jsx)(e,{...r}),user:null}:{isLoading:!1,loadingUI:null,user:u}}},54559:(e,t,r)=>{"use strict";r.d(t,{d:()=>l});var a=r(99827),s=r(42649),n=r(30227),o=r(89208);let l=(0,a.v)()(e=>({isCheckingAuth:!0,authUser:null,isLoggingIn:!1,isSigningUp:!1,checkAuth:async()=>{try{let t=o.A.get("token"),r=await s.A.get("/api/auth/check-auth",{headers:{Authorization:"Bearer ".concat(t)}});e({authUser:r.data.user,isCheckingAuth:!1})}catch(t){console.log(t),e({authUser:null,isCheckingAuth:!1})}},login:async t=>{try{e({isLoggingIn:!0});let r=await s.A.post("/api/auth/login",t);return e({authUser:r.data.user,isLoggingIn:!1}),o.A.set("token",r.data.token),n.X.toastS(r.data.message),r}catch(t){var r;n.X.toastE(null===(r=t.response)||void 0===r?void 0:r.data.message),e({isLoggingIn:!1})}},signUp:async e=>{try{let t=await s.A.post("/api/auth/sign-up",e);return o.A.set("token",t.data.token),console.log(t.data),n.X.toastS(t.data.message),t}catch(e){var t;n.X.toastE(null===(t=e.response)||void 0===t?void 0:t.data.message)}},logout:async()=>{try{o.A.remove("token")}catch(t){var e;n.X.toastE(null===(e=t.response)||void 0===e?void 0:e.data.message)}}}))},21567:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(43463),s=r(69795);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},42649:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(82651),s=r(2818);let n=a.A.create({baseURL:s.env.NEXT_PUBLIC_PORT})},31027:(e,t,r)=>{"use strict";r.d(t,{F:()=>o});var a=r(43463);let s=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,o=(e,t)=>r=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:o,defaultVariants:l}=t,i=Object.keys(o).map(e=>{let t=null==r?void 0:r[e],a=null==l?void 0:l[e];if(null===t)return null;let n=s(t)||s(a);return o[e][n]}),d=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,i,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:r,className:a,...s}=t;return Object.entries(s).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...l,...d}[t]):({...l,...d})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},89208:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>s});var s=function e(t,r){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=a({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var l in n)n[l]&&(o+="; "+l,!0!==n[l]&&(o+="="+n[l].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+o}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},s=0;s<r.length;s++){var n=r[s].split("="),o=n.slice(1).join("=");try{var l=decodeURIComponent(n[0]);if(a[l]=t.read(o,l),e===l)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){s(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},99827:(e,t,r)=>{"use strict";r.d(t,{v:()=>i});var a=r(12115);let s=e=>{let t;let r=new Set,a=(e,a)=>{let s="function"==typeof e?e(t):e;if(!Object.is(s,t)){let e=t;t=(null!=a?a:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,n={setState:a,getState:s,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e))},o=t=e(a,s,n);return n},n=e=>e?s(e):s,o=e=>e,l=e=>{let t=n(e),r=e=>(function(e,t=o){let r=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},i=e=>e?l(e):l}},e=>{var t=t=>e(e.s=t);e.O(0,[181,46,651,565,441,517,358],()=>t(40387)),_N_E=e.O()}]);