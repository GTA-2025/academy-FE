(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{64338:(e,t,r)=>{Promise.resolve().then(r.bind(r,27259))},76046:(e,t,r)=>{"use strict";var a=r(66658);r.o(a,"redirect")&&r.d(t,{redirect:function(){return a.redirect}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},30227:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var a=r(14046);let n={toastE:e=>{a.oR.error(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastS:e=>{a.oR.success(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastW:e=>{a.oR.warning(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})},toastI:e=>{a.oR.info(e,{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored",transition:a.Bounce})}}},27259:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var a=r(95155),n=r(76046),s=r(12115),i=r(42649),o=r(30227);let l=e=>{let{title:t,btnTitle:r,api:l,redirect:u}=e,d=(0,n.useRouter)(),[c,g]=(0,s.useState)({digit1:"",digit2:"",digit3:"",digit4:"",digit5:"",digit6:""}),[f,v]=(0,s.useState)(!1),[p,h]=(0,s.useState)(null),m=(0,s.useRef)([]),b=(e,t)=>{var r,a;let n={...c};if(t.length>1){let e=t.slice(0,6).split("");e.forEach((e,t)=>{n["digit".concat(t+1)]=e||""}),g(n);let a=e.findIndex(e=>""===e)+1;a>0&&a<6&&(null===(r=m.current[a])||void 0===r||r.focus())}else n["digit".concat(e+1)]=t,g(n),t&&e<5&&(null===(a=m.current[e+1])||void 0===a||a.focus())},x=(e,t)=>{if("Backspace"===t.key&&!c["digit".concat(e+1)]&&e>0){var r;null===(r=m.current[e-1])||void 0===r||r.focus()}},y=async e=>{var t,r,a;e.preventDefault(),v(!0),h(null);try{let e=Object.values(c).join(""),r=await i.A.post(l,{code:e});o.X.toastS(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.message),(null==r?void 0:r.data)&&d.push(u),v(!1)}catch(e){o.X.toastE(null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message),v(!1)}};return(0,s.useEffect)(()=>{Object.values(c).every(e=>""!==e)&&y(new Event("submit"))},[c]),(0,a.jsx)("div",{className:"fixed inset-0 flex flex-col justify-center items-center",children:(0,a.jsxs)("div",{className:"max-w-md w-full  rounded-lg p-6 space-y-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 dark:text-white",children:t}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 text-center",children:"Enter the 6-digit code sent to your email address."}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between gap-2",children:Object.keys(c).map((e,t)=>(0,a.jsx)("input",{ref:e=>m.current[t]=e,type:"text",maxLength:1,value:c[e],onChange:e=>b(t,e.target.value),onKeyDown:e=>x(t,e),className:"w-12 h-12 text-center text-xl font-semibold border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:f},t))}),p&&(0,a.jsx)("p",{className:"text-red-500 text-sm text-center",children:p}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-400",disabled:f,children:f?"Verifying...":r})]}),(0,a.jsx)("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400 hover:underline cursor-pointer",children:"Back to sign in"})]})})};var u=r(2215);let d=()=>(0,a.jsx)("div",{className:"fixed inset-0 flex flex-col justify-center items-center",children:(0,a.jsxs)("div",{className:"max-w-md w-full rounded-lg p-6 space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded-lg w-3/4 mx-auto animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-5/6 mx-auto animate-pulse"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"flex justify-between gap-2",children:Array.from({length:6}).map((e,t)=>(0,a.jsx)("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"},t))}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded-lg animate-pulse"})]}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mx-auto animate-pulse"})]})}),c=()=>{let e=(0,n.useRouter)(),{isLoading:t,loadingUI:r,user:i}=(0,u.M)({LoadingComponent:d,requireAuth:!1,redirectPath:"/auth/verify-email"});return((0,s.useEffect)(()=>{var t;(null==i?void 0:i.isVerified)&&(null==i?void 0:null===(t=i.starter)||void 0===t?void 0:t.completed)&&e.push("/home/education"),!i||null==i||!i.isVerified||(null==i?void 0:i.starter.onboard1)||(null==i?void 0:i.starter.onboard2)||(null==i?void 0:i.starter.onboard3)||(null==i?void 0:i.starter.completed)||e.push("/onboarding")},[i,e]),t)?r:(null==i?void 0:i.isVerified)?null:(0,a.jsx)("div",{children:(0,a.jsx)(l,{redirect:"/onboarding",btnTitle:"verify email",title:"Verify your email",api:"/api/auth/verify-email"})})}},2215:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var a=r(95155),n=r(12115),s=r(76046),i=r(54559);let o=function(){let{LoadingComponent:e,redirectPath:t,LoadingComponentProps:r={},requireAuth:o=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=(0,s.useRouter)(),{checkAuth:u,isCheckingAuth:d,authUser:c}=(0,i.d)();return((0,n.useEffect)(()=>{u()},[u]),(0,n.useEffect)(()=>{!d&&!c&&t&&o&&l.push(t)},[c,d,l,t,o]),d&&e)?{isLoading:!0,loadingUI:(0,a.jsx)(e,{...r}),user:null}:{isLoading:!1,loadingUI:null,user:c}}},54559:(e,t,r)=>{"use strict";r.d(t,{d:()=>o});var a=r(99827),n=r(42649),s=r(30227),i=r(89208);let o=(0,a.v)()(e=>({isCheckingAuth:!0,authUser:null,isLoggingIn:!1,isSigningUp:!1,checkAuth:async()=>{try{let t=i.A.get("token"),r=await n.A.get("/api/auth/check-auth",{headers:{Authorization:"Bearer ".concat(t)}});e({authUser:r.data.user,isCheckingAuth:!1})}catch(t){console.log(t),e({authUser:null,isCheckingAuth:!1})}},login:async t=>{try{e({isLoggingIn:!0});let r=await n.A.post("/api/auth/login",t);return e({authUser:r.data.user,isLoggingIn:!1}),i.A.set("token",r.data.token),s.X.toastS(r.data.message),r}catch(t){var r;s.X.toastE(null===(r=t.response)||void 0===r?void 0:r.data.message),e({isLoggingIn:!1})}},signUp:async e=>{try{let t=await n.A.post("/api/auth/sign-up",e);return i.A.set("token",t.data.token),console.log(t.data),s.X.toastS(t.data.message),t}catch(e){var t;s.X.toastE(null===(t=e.response)||void 0===t?void 0:t.data.message)}},logout:async()=>{try{i.A.remove("token")}catch(t){var e;s.X.toastE(null===(e=t.response)||void 0===e?void 0:e.data.message)}}}))},42649:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(82651),n=r(2818);let s=a.A.create({baseURL:n.env.NEXT_PUBLIC_PORT})},43463:(e,t,r)=>{"use strict";function a(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var s=t.length;for(r=0;r<s;r++)t[r]&&(a=e(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a}r.d(t,{$:()=>a,A:()=>n});let n=a},89208:(e,t,r)=>{"use strict";function a(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)e[a]=r[a]}return e}r.d(t,{A:()=>n});var n=function e(t,r){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=a({},r,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var o in s)s[o]&&(i+="; "+o,!0!==s[o]&&(i+="="+s[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+i}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],a={},n=0;n<r.length;n++){var s=r[n].split("="),i=s.slice(1).join("=");try{var o=decodeURIComponent(s[0]);if(a[o]=t.read(i,o),e===o)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){n(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},99827:(e,t,r)=>{"use strict";r.d(t,{v:()=>l});var a=r(12115);let n=e=>{let t;let r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:a,getState:n,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e))},i=t=e(a,n,s);return s},s=e=>e?n(e):n,i=e=>e,o=e=>{let t=s(e),r=e=>(function(e,t=i){let r=a.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?o(e):o}},e=>{var t=t=>e(e.s=t);e.O(0,[46,651,441,517,358],()=>t(64338)),_N_E=e.O()}]);